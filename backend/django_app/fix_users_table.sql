-- Add missing columns to users table
ALTER TABLE users ADD COLUMN IF NOT EXISTS foundations_complete BOOLEAN DEFAULT FALSE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS profiling_session_id VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS profiling_complete BOOLEAN DEFAULT FALSE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS profiling_completed_at TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS track_key VARCHAR(100);
ALTER TABLE users ADD COLUMN IF NOT EXISTS cohort_id INTEGER;
ALTER TABLE users ADD COLUMN IF NOT EXISTS preferred_learning_style VARCHAR(50);
ALTER TABLE users ADD COLUMN IF NOT EXISTS career_goals TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS cyber_exposure_level VARCHAR(50);
ALTER TABLE users ADD COLUMN IF NOT EXISTS mentor_capacity_weekly INTEGER;
ALTER TABLE users ADD COLUMN IF NOT EXISTS mentor_specialties JSONB;
ALTER TABLE users ADD COLUMN IF NOT EXISTS mentor_availability JSONB;
ALTER TABLE users ADD COLUMN IF NOT EXISTS mfa_enabled BOOLEAN DEFAULT FALSE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS mfa_method VARCHAR(50);
ALTER TABLE users ADD COLUMN IF NOT EXISTS last_login_ip INET;
ALTER TABLE users ADD COLUMN IF NOT EXISTS account_status VARCHAR(50) DEFAULT 'pending_verification';
ALTER TABLE users ADD COLUMN IF NOT EXISTS email_verified BOOLEAN DEFAULT FALSE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS email_verified_at TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS activated_at TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_hash VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS token_expires_at TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS password_reset_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS password_reset_token_created TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS email_token_created_at TIMESTAMP WITH TIME ZONE;
ALTER TABLE users ADD COLUMN IF NOT EXISTS metadata JSONB DEFAULT '{}';